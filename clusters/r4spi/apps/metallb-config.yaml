# MetalLB 설정 (IPAddressPool + L2Advertisement)을 metallb-system 네임스페이스에 배포합니다.
# MetalLB 컨트롤러는 미리 설치되어 있어야 하며, 동일 클러스터에서 Nginx / Istio Ingress
# LoadBalancer 서비스에 IP가 할당되도록 합니다.
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: metallb-config
  namespace: argocd
spec:
  project: base
  source:
    repoURL: https://github.com/jyje/cluster
    targetRevision: main
    path: manifests/metallb-jyje-1.0
  destination:
    server: https://kubernetes.default.svc
    namespace: metallb-system
  syncPolicy:
    automated: {}
