---
description: Generates git commit messages following project conventions with gitmoji, domain scope in parentheses, English titles and descriptions, and Co-Authored-By cursor.
globs: "**/*"
alwaysApply: false
---

# Git Commit Policy

When writing or modifying commit messages, AI must intelligently apply the following rules.

## Format
```
<gitmoji> <type>(<domain>): <title>

<description>

Co-Authored-By: Cursor <cursor@cursor.sh>
```

## Gitmoji Usage

Gitmoji mappings follow the gitmoji standard:

- **ğŸ”§** `chore`: Routine maintenance tasks, supplementary work, or minor corrections without intentional functional changes
- **ğŸ› ï¸** `fix`: Intentional functional configuration changes or feature adjustments
- **âœ¨** `feat`: Introduce new features
- **âœï¸** `typo`: Fix a typo
- **ğŸ›** `bug`: Fix a bug
- **â¬†ï¸** `dep`: Upgrade dependencies
- **ğŸ”** `security`: Add or update secrets
- **ğŸ—‘ï¸** `remove`: Deprecate code that needs to be cleaned up
- **â™»ï¸** `refactor`: Refactor code
- **ğŸ“** `docs`: Add or update documentation
- **ğŸ¨** `style`: Improve structure / format of the code
- **âš¡** `perf`: Improve performance
- **âœ…** `test`: Add, update, or pass tests
- **ğŸ”¨** `build`: Add or update development scripts

> Reference: [gitmoji.dev](https://gitmoji.dev/) - An emoji guide for your commit messages

## Type and Domain
- **Type**: `feat`, `fix`, `bug`, `typo`, `refactor`, `dep`, `security`, `remove`, `chore`, `docs`, `style`, `perf`, `test`, `build`
- **Domain**: Component name in parentheses, lowercase, kebab-case if needed (e.g., `(nfs)`, `(open-webui)`, `(milvus)`, `(argo-cd)`)

## Title & Description
- **Language**: Always English
- **Style**: Concise, imperative mood, start with lowercase after type
- **Description**: Optional, explain "why" or provide context

## Co-Authored-By
Always include: `Co-Authored-By: Cursor <cursor@cursor.sh>`

## Intelligence Selection
- This rule is activated only when executing `git commit` commands or when commit message writing is needed.
- Ignore this rule during simple code modifications and focus on the task at hand.

## AI Commit Workflow

When the user requests a git commit, AI must follow this workflow:

1. **Propose commit message in markdown format**: 
   - Generate a commit message following the format and conventions above
   - Present it as a markdown-formatted code block for easy review
   - Include the full message with title, description (if needed), and Co-Authored-By tag

2. **Request user confirmation**:
   - Ask the user if they want to proceed with the commit using the proposed message
   - Wait for explicit approval before executing `git commit`
   - If the user requests changes, revise the message accordingly

3. **Push only after confirmation**:
   - After committing, ask the user if they want to push to the remote repository
   - Only execute `git push` after receiving explicit user approval
   - Never push automatically without user confirmation

Example interaction:
```
AI: "### ì œì•ˆí•˜ëŠ” ì»¤ë°‹ ë©”ì‹œì§€:

\`\`\`
ğŸ› ï¸ fix(nfs): update configuration settings

Update NFS mount options to improve performance.

Co-Authored-By: Cursor <cursor@cursor.sh>
\`\`\`

ì´ ë©”ì‹œì§€ë¡œ ì»¤ë°‹í• ê¹Œìš”?"

User: "ë„¤"

AI: [executes git commit]

AI: "ì»¤ë°‹ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œí• ê¹Œìš”?"

User: "ë„¤"

AI: [executes git push]
```

## Examples

Based on project commit history, here are examples following the current policy:

**Feature addition:**
```
âœ¨ feat(n8n): add n8n application

Add n8n workflow automation application to the cluster.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Intentional functional configuration change:**
```
ğŸ› ï¸ fix(nfs): rollback health probes and chart rename to fix distroless image compatibility

Revert recent changes including health probes and chart renaming because the
distroless image lacks 'sh' and other shell utilities required for probes.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Routine maintenance:**
```
ğŸ”§ chore(helm): remove deprecated Helm chart versions and clean up configuration files

Remove old chart versions and clean up unused configuration files for homer applications.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Bug fix:**
```
ğŸ› bug(open-webui): resolve inconsistencies in git commit policy rule

Fix three bugs in the git commit policy rule:
1. Translate Korean text to English to match the 'Always English' policy
2. Clarify gitmoji mapping conflicts
3. Add missing types to the Type list

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Dependency update:**
```
â¬†ï¸ dep(open-webui): update chart to 10.2.1 from 8.10.0

Upgrade open-webui Helm chart to latest version.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Refactoring:**
```
â™»ï¸ refactor(nfs): rename custom Helm chart with -jyje suffix and add health probes

Rename Helm chart directory and add health probe configurations.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Security:**
```
ğŸ” security(open-webui): add CORS_ALLOW_ORIGIN environment variable for enhanced security

Configure CORS settings to restrict allowed origins.

Co-Authored-By: Cursor <cursor@cursor.sh>
```

**Typo fix:**
```
âœï¸ typo(docs): fix typo in gitmoji standard reference

Correct "gitmodi" to "gitmoji" in documentation.

Co-Authored-By: Cursor <cursor@cursor.sh>
```